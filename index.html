<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Exchange PRO ‚Äì Version D√©mo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#0b0f1a;color:#fff}
header{position:sticky;top:0;background:#0f172a;padding:12px;display:flex;justify-content:space-between;align-items:center;z-index:1000}
button{padding:8px 14px;border:none;border-radius:6px;cursor:pointer}
.primary{background:#2563eb;color:#fff}
.secondary{background:#1e293b;color:#fff}
section{padding:40px 15px}
.hidden{display:none}
.card{background:#111827;padding:15px;border-radius:10px;margin-bottom:15px}
input{width:100%;padding:10px;margin:8px 0;border-radius:6px;border:none}
small{color:#94a3b8}
h2,h3{margin-top:0}
.market{height:360px;background:#020617;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px;color:#38bdf8}
.nav{display:flex;gap:10px}
</style>
</head>

<body>

<header>
  <strong>Exchange PRO</strong>
  <div class="nav">
    <button class="secondary" onclick="show('login')">Connexion</button>
    <button class="primary" onclick="show('signup')">S‚Äôinscrire</button>
  </div>
</header>

<section id="home">
  <h2>Plateforme de Trading Num√©rique</h2>
  <p>Solution moderne conforme aux standards des exchanges internationaux.</p>
  <div class="market" id="tradingChartContainer">
    <canvas id="tradingChart"></canvas>
  </div>
</section>

<section id="login" class="hidden">
  <div class="card">
    <h3>Connexion</h3>
    <input id="loginEmail" placeholder="Email">
    <input id="loginPass" type="password" placeholder="Mot de passe">
    <button class="primary" onclick="login()">Se connecter</button>
  </div>
</section>

<section id="signup" class="hidden">
  <div class="card">
    <h3>Inscription</h3>
    <input id="signEmail" placeholder="Email uniquement">
    <input type="password" placeholder="Mot de passe">
    <button class="primary" onclick="signup()">Cr√©er un compte</button>
    <small>Inscription par email uniquement (s√©curit√© renforc√©e)</small>
  </div>
</section>

<section id="user" class="hidden">
  <h2>Tableau de bord utilisateur</h2>

  <div class="card">
    <strong>UID utilisateur :</strong> <span id="uid"></span>
  </div>

  <div class="card">
    <h3>Signal de trading</h3>
    <button class="primary" onclick="getSignal()">Trader</button>
    <p id="signalMsg"></p>
  </div>

  <div class="card">
    <h3>Retrait</h3>
    <p>UID administrateur requis (expire apr√®s usage)</p>
    <input placeholder="UID admin">
    <button class="secondary">Demander retrait</button>
  </div>

  <div class="card">
    <h3>Historique</h3>
    <small>Aucune transaction r√©elle ‚Äì environnement simul√©</small>
  </div>
</section>

<section id="admin" class="hidden">
  <h2>Dashboard Administrateur</h2>

  <!-- Envoyer solde utilisateur -->
  <div class="card">
    <h3>Envoyer solde utilisateur</h3>
    <input id="adminUID" placeholder="UID utilisateur">
    <input id="adminAmount" placeholder="Montant USDT">
    <button class="primary" onclick="sendBalance()">Valider envoi</button>
    <div id="adminMsg"></div>
    <small>Double confirmation requise</small>
  </div>

  <!-- Gestion des signaux -->
  <div class="card">
    <h3>Gestion des signaux</h3>
    <p>4 signaux toutes les 4 heures</p>
    <button class="primary" onclick="adminSignal()">G√©n√©rer signal</button>
    <div id="adminSignalMsg" class="notice"></div>
  </div>

  <!-- Solde Admin -->
  <div class="card">
    <h3>Solde total Admin</h3>
    <strong id="adminBalance">0 USDT</strong>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
function getSignal(){
  const now = Date.now();
  const FOUR_HOURS = 4 * 60 * 60 * 1000;

  if(now - lastSignal < FOUR_HOURS){
    const minutes = Math.ceil((FOUR_HOURS - (now - lastSignal)) / 60000);
    document.getElementById("signalMsg").innerText =
      "‚è≥ Signal indisponible ‚Äì prochain dans " + minutes + " min";
    return;
  }

  lastSignal = now;
  localStorage.setItem("lastSignalTime", lastSignal);

  document.getElementById("signalMsg").innerText =
    "üìà Signal g√©n√©r√© ‚Äì tendance haussi√®re (simulation)";
}

function show(id){
  document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

function signup(){
  alert("Compte cr√©√© (d√©mo)");
  show("login");
}

const ADMIN_EMAIL = "admin";
const ADMIN_PASS = "admin123"; // identifiant admin fixe

function login(){
  const email = document.getElementById("loginEmail").value.trim();
  const pass  = document.getElementById("loginPass").value.trim();

  if(!email || !pass){
    alert("Veuillez remplir tous les champs");
    return;
  }

  // üîê Connexion ADMIN
  if(email === ADMIN_EMAIL && pass === ADMIN_PASS){
    show("admin");
    return;
  }

  // üë§ Connexion UTILISATEUR
  document.getElementById("uid").innerText =
    "UID-" + Math.floor(10000 + Math.random() * 90000);
  show("user");
}

function getSignal(){
  const now = Date.now();
  const FOUR_HOURS = 4 * 60 * 60 * 1000;

  if(now - lastSignal < FOUR_HOURS){
    const minutes = Math.ceil((FOUR_HOURS - (now - lastSignal)) / 60000);
    document.getElementById("signalMsg").innerText =
      "‚è≥ Signal indisponible ‚Äì prochain dans " + minutes + " min";
    return;
  }

  lastSignal = now;
  localStorage.setItem("lastSignalTime", lastSignal);

  document.getElementById("signalMsg").innerText =
    "üìà Signal g√©n√©r√© ‚Äì tendance haussi√®re (simulation)";
}

// --- GRAPH TRADINGVIEW SIMUL√â ---
const ctx = document.getElementById('tradingChart').getContext('2d');
new Chart(ctx, {
    type: 'line', // visuel pro
    data: {
        labels: ['09h','10h','11h','12h','13h','14h','15h'],
        datasets: [{
            label: 'USD/USDT',
            data: [100,102,106,105,110,113,116],
            borderColor: '#ff9800',
            backgroundColor: '#2563eb',
            fill: true
        }]
    },
    options: {
        responsive:true,
        plugins:{legend:{display:false}},
        scales:{
            x:{grid:{color:'#1e293b'}},
            y:{grid:{color:'#1e293b'}}
        }
    }
});
</script>const chartEl = document.getElementById("tradingChart");

if(chartEl){
  const ctx = chartEl.getContext("2d");

  const data = {
    datasets: [{
      label: "BTC/USDT",
      data: [
        {x:1, o:100, h:110, l:95, c:105},
        {x:2, o:105, h:115, l:100, c:112},
        {x:3, o:112, h:118, l:108, c:110},
        {x:4, o:110, h:120, l:109, c:118},
        {x:5, o:118, h:125, l:115, c:122},
        {x:6, o:122, h:130, l:120, c:128}
      ]
    }]
  };

  new Chart(ctx, {
    type: 'candlestick',
    data: data,
    options: {
      responsive: true,
      plugins: { legend: { display: false } }
    }
  });
}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"></script>
let adminTotal = 1000; // solde Admin simul√©

function sendBalance(){
  const uid = document.getElementById("adminUID").value.trim();
  const amount = parseFloat(document.getElementById("adminAmount").value);

  if(!uid){
    document.getElementById("adminMsg").innerText = "Veuillez entrer un UID";
    return;
  }
  if(isNaN(amount) || amount <= 0){
    document.getElementById("adminMsg").innerText = "Montant invalide";
    return;
  }
  if(amount > adminTotal){
    document.getElementById("adminMsg").innerText = "Solde insuffisant";
    return;
  }
  if(!confirm(`Confirmer l'envoi de ${amount.toFixed(2)} USDT √† ${uid} ?`)){
    document.getElementById("adminMsg").innerText = "Envoi annul√©";
    return;
  }

  adminTotal -= amount;
  document.getElementById("adminBalance").innerText = adminTotal.toFixed(2) + " USDT";
  document.getElementById("adminMsg").innerText = `‚úÖ ${amount.toFixed(2)} USDT envoy√©s √† ${uid}`;
}

function adminSignal(){
  const gain = (Math.random()*10-5).toFixed(2);
  document.getElementById("adminSignalMsg").innerText = `Signal g√©n√©r√©: ${gain} USDT`;
  lastSignal = Date.now();
  alert(`Signal admin g√©n√©r√©: ${gain} USDT`);
}</body>
</html>
